package br.com.caelum.ed;

import java.util.Arrays;

public class Vetor {

	// controladores de posicao
	private int tamanhoAtual = 0;
	
	// declarando e inicializando um array encapsulado de Aluno
	// com capacidade 100
	
	// declara um array (vetor) do tipo alunos, 
	// apos asscia uma instancia de array do tipo aluno, 
	// com tamanho fixo de 100
	private Aluno[] alunos = new Aluno[100000];
	
	private void garanteEspaco() {
		if(this.tamanhoAtual == this.alunos.length) {
			Aluno[] novoArray = new Aluno[this.alunos.length * 2];
			for (int index = 0; index < this.alunos.length; index++) {
				novoArray[index] = this.alunos[index];
			}
			this.alunos = novoArray;
		}
	}
	
	private boolean posicaoValida(int posicao) {
		return posicao >= 0 && posicao <= this.tamanhoAtual;
	}
	
	public void adiciona(Aluno novoAluno) {
		this.garanteEspaco();
		boolean insere = true;
		while(insere) {
			Aluno posicao = alunos[this.tamanhoAtual];
			if (posicao == null) {
				alunos[this.tamanhoAtual] = novoAluno;
			}
			this.tamanhoAtual += this.tamanhoAtual + 1;
			insere = false;
		}
	}
	
	public void adiciona(int posicao, Aluno aluno) {
		this.garanteEspaco();
		if (!this.posicaoValida(posicao)) {
			throw new IllegalArgumentException("Posição inválida");
		}

		for (int index = this.tamanhoAtual - 1; index >= posicao; index-=1) {
			this.alunos[index + 1] = this.alunos[index];
		}
		
		this.alunos[posicao] = aluno;
		this.tamanhoAtual++;
	}
	
	public Aluno pega(int posicao) throws NotFoundException {
		if (!this.posicaoValida(posicao)) {
			throw new IllegalArgumentException("Posição inválida");
		}
		
		if (alunos[posicao] == null) {
			throw new NotFoundException("Nao encontrei isso");
		}
		
		return alunos[posicao];
		
	}
	
	public void remove(int posicao) throws NotFoundException {
		if (!this.posicaoValida(posicao)) {
			throw new IllegalArgumentException("Posição inválida");
		}

		if (alunos[posicao] == null) {
			throw new NotFoundException("Nao encontrei isso");
		}
		
		for (int index = posicao; index < this.tamanhoAtual - 1; index++) {
			this.alunos[index] = this.alunos[index + 1];
		}

		this.tamanhoAtual--;
				
	}
	
	public boolean contem(Aluno aluno) {
		int indexadorLocal = 0;
		boolean procurar = true;
		boolean encontrado = false;
		
		while (procurar) {
			try {
				if (alunos[indexadorLocal].getNome().toString().equals(aluno.getNome())) {
					procurar = false;
					encontrado = true;
				}
				indexadorLocal = indexadorLocal + 1;
			} catch (NullPointerException e) {
				return encontrado;
			}
		}

		return encontrado;
	}
	
	public int tamanho() {
		return this.tamanhoAtual;
	}
	
	public String toString() {
		if (this.tamanhoAtual == 0) {
			return "[]";
		}
	
		StringBuilder builder = new StringBuilder();
		builder.append("[");
		for (int index = 0; index < this.tamanhoAtual - 1; index++) {
			builder.append(this.alunos[index]);
			builder.append(",");
		}
		builder.append(this.alunos[this.tamanhoAtual - 1]);
		builder.append("]");

		return builder.toString();
	}
	
}
